(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{1103:(e,t,l)=>{"use strict";l.d(t,{t:()=>s});var n=l(5461);class s extends n.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error(e,t)}render(){return this.state.hasError?this.props.fallback:this.props.children}constructor(e){super(e),this.state={hasError:!1}}}},1422:(e,t,l)=>{"use strict";l.d(t,{s:()=>s});var n=l(7291);function s(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)();return{get:e=>t.get(e),getAll:()=>{let e={};return t.forEach((t,l)=>{e[l]=t}),e},push:l=>{let n=new URLSearchParams(t.toString());Object.entries(l).forEach(e=>{let[t,l]=e;return n.set(t,l)}),e.push("?"+n.toString())},replace:l=>{let n=new URLSearchParams(t.toString());Object.entries(l).forEach(e=>{let[t,l]=e;return n.set(t,l)}),e.replace("?"+n.toString())}}}},4914:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>h});var n=l(2273),s=l(5461),r=l(1363),a=l(9112),i=l(1422),c=l(1103),o=l(7291),u=l(6262);let d="https://via.placeholder.com/200x200?text=No+Image";function f(e){let{src:t,alt:l}=e,[r,a]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"w-full max-w-[400px] h-[400px] flex items-center justify-center relative mb-4",children:[!r&&(0,n.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse rounded-xl"}),(0,n.jsx)("img",{src:t,alt:l,className:"w-full h-full object-cover object-center rounded-xl border border-gray-200 transition-opacity duration-300 ".concat(r?"opacity-100":"opacity-0"),onLoad:()=>a(!0),draggable:!1})]})}function m(){var e,t,l,c,m,x,h,p,v,j,b;let{get:g}=(0,i.s)(),y=g("categoryCode")||"",N=g("sectionId")||"200",{data:w,isLoading:S,error:k}=(0,r.I)((0,a.D)(y,N)),{battlePool:E,championId:C,challengerId:P,selected:A,setSelected:O,history:I,replace:L}=function(e){let{get:t,push:l,replace:n}=(0,i.s)(),r=t("battlePool"),a=t("champion"),c=t("history"),[o,u]=(0,s.useState)(null),[d,f]=(0,s.useState)(null),[m,x]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),v=(null==c?void 0:c.split(",").filter(Boolean))||[],j=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(e){if(r&&a){let e=r.split(",");JSON.stringify(o)!==JSON.stringify(e)&&u(e),d!==a&&f(a),j.current=null;return}if(!r&&e.items.length>0){let t=[...e.items];for(let e=t.length-1;e>0;e--){let l=Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/0x100000000*(e+1));[t[e],t[l]]=[t[l],t[e]]}let l=t.slice(0,20).map(e=>e.id),n=l[0];if(j.current&&JSON.stringify(j.current.pool)===JSON.stringify(l)&&j.current.champion===n)return;u(l),f(n),j.current={pool:l,champion:n}}}},[e,r,a]),(0,s.useEffect)(()=>{e&&!r&&o&&d&&n({battlePool:o.join(","),champion:d})},[e,r,o,d,n]),(0,s.useEffect)(()=>{o&&d&&x(function(e,t){let l=e.filter(e=>e!==t);if(0===l.length)return null;let n=Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/0x100000000*l.length);return l[n]}(o,d))},[o,d]),(0,s.useEffect)(()=>{p(null)},[o,d]),{battlePool:o,championId:d,challengerId:m,selected:h,setSelected:p,history:v,push:l,replace:n}}(w),D=(0,o.useRouter)();if(s.useEffect(()=>{E&&1===E.length&&C&&D.push("/champion?categoryCode=".concat(y,"&sectionId=").concat(N,"&winner=").concat(C))},[E,C,y,N,D]),S)return(0,n.jsx)(u.k,{});if(!E||!C||!P)return null;if(k)return(0,n.jsx)("div",{children:"에러 발생"});if(C===P)return(0,n.jsx)("div",{children:"선택할 상품이 없습니다."});let R=(null!=(b=null==w?void 0:w.items)?b:[]).reduce((e,t)=>(e[t.id]=t,e),{}),U=R[C],_=R[P];if(!U||!_)return(0,n.jsx)("div",{children:"선택할 상품이 없습니다."});let M=e=>{O(e);let t=e===C?P:C;L({battlePool:E.filter(e=>e!==t).join(","),champion:e,history:[...I,e].join(",")})};return(0,n.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[70vh] w-full",children:(0,n.jsxs)("div",{className:"card w-full max-w-4xl flex flex-col items-center",children:[(0,n.jsx)("h2",{className:"text-title mb-8 text-center",children:"더 마음에 드는 상품을 선택하세요"}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-8 w-full",children:[(0,n.jsx)("div",{className:"flex-1 flex justify-end",children:(0,n.jsxs)("div",{className:"flex flex-col items-center w-64",children:[(0,n.jsx)(f,{src:(null==(e=U.image)?void 0:e.url)||d,alt:(null==(t=U.info)?void 0:t.productName)||"상품"}),(0,n.jsx)("div",{className:"mt-3 font-semibold text-lg text-center",children:(null==(l=U.info)?void 0:l.productName)||"상품명 없음"}),(0,n.jsx)("div",{className:"text-gray text-sm mb-1",children:(null==(c=U.info)?void 0:c.brandName)||"브랜드 없음"}),(0,n.jsx)("div",{className:"text-black text-base mb-2",children:(null==(m=U.info)?void 0:m.finalPrice)!==void 0?U.info.finalPrice.toLocaleString()+"원":"가격 정보 없음"}),(0,n.jsx)("button",{className:"btn-black mt-4 w-full text-base",onClick:()=>M(U.id),disabled:null!==A,children:"선택"})]})}),(0,n.jsx)("div",{className:"flex flex-col items-center mx-6",children:(0,n.jsx)("span",{className:"text-4xl font-extrabold text-gray-400 select-none",children:"VS"})}),(0,n.jsx)("div",{className:"flex-1 flex justify-start",children:(0,n.jsxs)("div",{className:"flex flex-col items-center w-64",children:[(0,n.jsx)(f,{src:(null==(x=_.image)?void 0:x.url)||d,alt:(null==(h=_.info)?void 0:h.productName)||"상품"}),(0,n.jsx)("div",{className:"mt-3 font-semibold text-lg text-center",children:(null==(p=_.info)?void 0:p.productName)||"상품명 없음"}),(0,n.jsx)("div",{className:"text-gray text-sm mb-1",children:(null==(v=_.info)?void 0:v.brandName)||"브랜드 없음"}),(0,n.jsx)("div",{className:"text-black text-base mb-2",children:(null==(j=_.info)?void 0:j.finalPrice)!==void 0?_.info.finalPrice.toLocaleString()+"원":"가격 정보 없음"}),(0,n.jsx)("button",{className:"btn-outline mt-4 w-full text-base",onClick:()=>M(_.id),disabled:null!==A,children:"선택"})]})})]}),(0,n.jsxs)("div",{className:"mt-8 text-gray text-sm",children:["남은 라운드: ",E.length," / 20"]})]})})}function x(){return(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)(u.k,{}),children:(0,n.jsx)(c.t,{fallback:(0,n.jsx)("div",{children:"배틀 에러 발생"}),children:(0,n.jsx)(m,{})})})}function h(){return(0,n.jsx)(x,{})}},5697:(e,t,l)=>{Promise.resolve().then(l.bind(l,4914))},6262:(e,t,l)=>{"use strict";l.d(t,{k:()=>s});var n=l(2273);function s(){return(0,n.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] w-full",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,n.jsxs)("div",{className:"relative w-48 h-48 mb-10",children:[[...Array(12)].map((e,t)=>(0,n.jsx)("span",{className:"absolute left-1/2 top-1/2 w-8 h-8 -ml-4 -mt-4 rounded-full opacity-20",style:{backgroundColor:"#000",transform:"rotate(".concat(30*t,"deg) translate(88px)"),animation:"spinnerDotFade 1.2s linear infinite",animationDelay:"".concat(.1*t,"s")}},t)),(0,n.jsx)("style",{children:"\n            @keyframes spinnerDotFade {\n              0% { opacity: 1; }\n              100% { opacity: 0.2; }\n            }\n          "})]}),(0,n.jsx)("div",{className:"text-base text-gray-700 font-medium",children:"데이터를 불러오고 있습니다"})]})})}l(5461)},9112:(e,t,l)=>{"use strict";l.d(t,{x:()=>r,D:()=>a});let n=l(5127).A.create({baseURL:"https://api.alp.musinsa.com/api2/hm/web/v5/pans/ranking",headers:{"Content-Type":"application/json"}});function s(e,t,l){return{queryKey:e,queryFn:t,...l&&{select:l}}}let r=()=>s(["categoryTabs"],async()=>{var e,t;let{data:l}=await n.get("",{params:{storeCode:"musinsa",sectionId:200,contentsId:"",categoryCode:"000",gf:"A"}}),s=(null!=(e=l.data.modules)?e:[]).find(e=>"TAB_OUTLINED"===e.type);return{tabs:null!=(t=null==s?void 0:s.tabs)?t:[]}}),a=(e,t)=>s(["products",e,t],async()=>{var l;let{data:s}=await n.get("/sections/".concat(t),{params:{storeCode:"musinsa",categoryCode:e,contentsId:"",gf:"A"}});return{items:(null!=(l=s.data.modules)?l:[]).filter(e=>"MULTICOLUMN"===e.type&&Array.isArray(e.items)).flatMap(e=>e.items)}})}},e=>{e.O(0,[112,724,970,804,358],()=>e(e.s=5697)),_N_E=e.O()}]);